# Phase 3: リファクタリング

## 依頼概要

コードレビューにて **4件** の冗長・不要なコードが指摘されました。
可読性・保守性の向上のため、リファクタリングをお願いします。

---

## 3-A. ヘルパー関数の統合

**対象**: `backend/src/routes/api.ts`

同じ処理を行うヘルパー関数が複数存在し、ルートによって使い分けられています。1つに統合してください。

**レビュー観点**:
- 同じテーブルに対して同じクエリを発行する関数が複数ないか
- 返り値の型（`undefined` / `null`）が統一されているか

---

## 3-B. 不要なコードの削除

**対象**: `backend/src/routes/api.ts`

レスポンス送信後の到達不能コードや、どこからも呼ばれていない関数があります。削除してください。

**レビュー観点**:
- `res.json()` の後にコードが続いていないか
- 定義されているが呼び出されていない関数がないか

---

## 3-C. ロジックの簡潔化

**対象**: `frontend/src/views/LotteryResult.vue`

標準メソッドやプロパティで簡潔に書ける処理が、冗長に実装されています。シンプルに書き直してください。

**レビュー観点**:
- 配列の `.length` で済む処理をループでカウントしていないか
- 標準メソッド（`toFixed()` 等）で済む処理を独自実装していないか

---

## 3-D. コメントの整理

**対象**: `backend/src/routes/api.ts`, `frontend/src/services/api.ts`

コードをそのまま繰り返すだけのコメントや、実際の動作と一致しないコメントがあります。不要なコメントは削除し、誤ったコメントは修正してください。

**レビュー観点**:
- コメントがコードの内容をそのまま繰り返しているだけでないか
- コメントに書かれた仕様（件数制限、キャッシュ等）が実際に実装されているか
